(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),i=(a(15),a(4)),l=a(1),s=a(7),u=a.n(s);var m=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{className:"header__logo",src:u.a,alt:"logo"}))},d=r.a.createContext({});var f=function(e){var t=r.a.useContext(d),a=t&&e.card.owner._id===t._id,n="card__delete-button ".concat(a?"card__delete-button_active":""),o=t&&e.card.likes.some((function(e){return e._id===t._id})),c="card__like-button ".concat(o?"card__like-button_active":""),i=e.card.likes.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{key:e.card._id,className:"card"},r.a.createElement("div",{className:"card__container"},r.a.createElement("button",{type:"button","aria-label":"Delete button",className:n,onClick:function(){e.onCardDelete(e.card)}}),r.a.createElement("div",{className:"card__image",style:{backgroundImage:"url(".concat(e.card.link,")")},onClick:function(){e.onCardClick(e.card)}}),r.a.createElement("div",{className:"card__text"},r.a.createElement("h2",{className:"card__title"},e.card.name),r.a.createElement("div",{className:"card__like-container"},r.a.createElement("button",{type:"button","aria-label":"Like button",className:c,onClick:function(){e.onCardLike(e.card)}}),r.a.createElement("p",{className:"card__like-counter"},i))))))};var _=function(e){var t=r.a.useContext(d);return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__container"},r.a.createElement("div",{className:"profile__image-container"},r.a.createElement("button",{className:"profile__image-edit","aria-label":"Update profile image",onClick:e.onEditAvatar}),r.a.createElement("img",{className:"profile__image",src:t.avatar,alt:"profile-picture"})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__text"},r.a.createElement("h1",{className:"profile__title"},t.name),r.a.createElement("p",{className:"profile__subtitle"},t.about)),r.a.createElement("button",{className:"button profile__edit-button","aria-label":"Edit button",onClick:e.onEditProfile}))),r.a.createElement("button",{className:"button profile__add-button","aria-label":"Add button",onClick:e.onAddPlace})),r.a.createElement("section",{className:"cards"},r.a.createElement("ul",{className:"cards__grid"},e.cards.map((function(t,a){return r.a.createElement(f,{key:a,card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})})))))};var p=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 | Linda Kovacs - Around The U.S."))};var h=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"form form__".concat(e.name," ").concat(e.isOpen?"form_visible":"")},r.a.createElement("form",{className:"form__container",name:"form__".concat(e.name),action:"#",noValidate:!0,onSubmit:e.onSubmit},r.a.createElement("button",{className:"form__reset-button",type:"reset","aria-label":"Close button",onClick:e.onClose}),r.a.createElement("h2",{className:"form__header"},e.title),e.children)))};var b=function(e){var t=r.a.useContext(d),a=r.a.useState(),n=Object(l.a)(a,2),o=n[0],c=n[1],i=r.a.useState(),s=Object(l.a)(i,2),u=s[0],m=s[1];return r.a.useEffect((function(){c(t&&t.name),m(t&&t.about)}),[t]),r.a.createElement(h,{name:"edit-profile",title:"Edit profile",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:u})}},r.a.createElement("fieldset",{className:"form__fields"},r.a.createElement("input",{type:"text",className:"form__input form__title",id:"name-input",name:"name",placeholder:"Name",minLength:"2",maxLength:"40",required:!0,value:o||"",onChange:function(e){c(e.target.value)}}),r.a.createElement("span",{className:"form__input-error",id:"name-input-error"}),r.a.createElement("input",{type:"text",className:"form__input form__subtitle",id:"job-input",name:"job",placeholder:"Job",minLength:"2",maxLength:"200",required:!0,value:u||"",onChange:function(e){m(e.target.value)}}),r.a.createElement("span",{className:"form__input-error",id:"job-input-error"}),r.a.createElement("button",{className:"form__submit-button",type:"submit",value:"Save","aria-label":"Save button"},"Save")))};var E=function(e){var t=r.a.useRef("");return r.a.createElement(h,{name:"change-image",title:"Change profile picture",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})}},r.a.createElement("fieldset",{className:"form__fields"},r.a.createElement("input",{type:"url",className:"form__input form__image-link",id:"linkImage-input",name:"imageLink",placeholder:"Image link",minLength:"2",required:!0,ref:t}),r.a.createElement("span",{className:"form__input-error",id:"linkImage-input-error"}),r.a.createElement("button",{className:"form__submit-button",type:"submit",value:"Save","aria-label":"Save button"},"Save")))};var v=function(e){var t=r.a.useState(""),a=Object(l.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),i=Object(l.a)(c,2),s=i[0],u=i[1];return r.a.createElement(h,{name:"add-card",title:"New place",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({title:n,link:s})}},r.a.createElement("fieldset",{className:"form__fields"},r.a.createElement("input",{type:"text",className:"form__input form__card-title",id:"card-input",name:"title",placeholder:"Title",minLength:"1",maxLength:"30",required:!0,onChange:function(e){o(e.target.value)}}),r.a.createElement("span",{className:"form__input-error",id:"card-input-error"}),r.a.createElement("input",{type:"url",className:"form__input form__image-link",id:"link-input",name:"link",placeholder:"Image link",required:!0,onChange:function(e){u(e.target.value)}}),r.a.createElement("span",{className:"form__input-error",id:"link-input-error"}),r.a.createElement("button",{className:"form__submit-button",type:"submit",value:"Create","aria-label":"Create button"},"Create")))};var g=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"form form__add-image"+(e.card?" form_visible":"")},r.a.createElement("div",{className:"form__open-image"},r.a.createElement("button",{className:"form__reset-button",type:"reset","aria-label":"Close button",onClick:e.onClose}),r.a.createElement("img",{className:"form__image",src:e.card?e.card.link:"#",alt:e.card?e.card.name:""}),r.a.createElement("p",{className:"form__image-title"},e.card?e.card.name:""))))},k=a(8),C=a(9),N=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(k.a)(this,e),this._baseUrl=a,this._headers=n}return Object(C.a)(e,[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"updateProfile",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addNewCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:e.title,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:t?"DELETE":"PUT"}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-2",headers:{Authorization:"d38c3eff-8aa3-43a2-86b1-ec6a6fc8a616","Content-Type":"application/json"}});var j=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(l.a)(o,2),s=c[0],u=c[1],f=r.a.useState(!1),k=Object(l.a)(f,2),C=k[0],j=k[1],y=r.a.useState(),O=Object(l.a)(y,2),S=O[0],P=O[1],U=r.a.useState({}),A=Object(l.a)(U,2),L=A[0],x=A[1],w=r.a.useState([]),D=Object(l.a)(w,2),I=D[0],T=D[1];function J(){u(!1),n(!1),j(!1),P(null)}return r.a.useEffect((function(){N.getUserInfo().then((function(e){x(e)})).catch((function(e){console.log(e)}))}),[]),r.a.useEffect((function(){N.getInitialCards().then((function(e){T((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e))}))})).catch((function(e){console.log(e)}))}),[]),r.a.createElement(d.Provider,{value:L},r.a.createElement(m,null),r.a.createElement(_,{cards:I,onEditProfile:function(){n(!0)},onAddPlace:function(){u(!0)},onEditAvatar:function(){j(!0)},onCardClick:function(e){P(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===L._id}));N.changeLikeCardStatus(e._id,t).then((function(t){var a=I.map((function(a){return a._id===e._id?t:a}));T(a)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){N.deleteCard(e._id).then((function(){T(I.filter((function(t){return t._id!==e._id})))})).catch((function(e){console.log(e)}))},onClose:J,isEditProfilePopupOpen:a,isAddPlacePopupOpen:s,isEditAvatarPopupOpen:C,selectedCard:S}),r.a.createElement(p,null),r.a.createElement(b,{isOpen:a,onClose:J,onUpdateUser:function(e){var t=e.name,a=e.about;N.updateProfile(t,a).then((function(e){x(e),n(!1)})).catch((function(e){console.log(e)}))}}),r.a.createElement(E,{isOpen:C,onClose:J,onUpdateAvatar:function(e){var t=e.avatar;N.updateAvatar(t).then((function(e){x(e),j(!1)})).catch((function(e){console.log(e)}))}}),r.a.createElement(v,{isOpen:s,onClose:J,onAddPlace:function(e){var t=e.title,a=e.link;N.addNewCard({title:t,link:a}).then((function(e){T([].concat(Object(i.a)(I),[e]))})),J()}}),r.a.createElement(h,{name:"confirmation",title:"Are you sure?",isOpen:!1,onClose:J}),r.a.createElement(g,{onClose:J,card:S}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"}},[[10,1,2]]]);
//# sourceMappingURL=main.bbdf026c.chunk.js.map